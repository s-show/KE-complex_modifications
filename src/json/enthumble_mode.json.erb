{
  "title": "Enthumble(Windows App) Mode",
  "rule_list": false,
  "make_extra_description": true,
  "rules": [
    {
      "description": "(Enthumble) IJKL Mode / normal",
      "extra_descriptions": [
        "無変換/英数 + J, K, I, L -> 矢印キー（←, ↓, ↑, →）",
        "無変換/英数単独 -> 英数キー"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("international5", [], ["any"]) %>,
          "to": [
            <%= set_variable(["enthumble_mode"], [1]) %>
          ],
          "to_if_alone": <%= to([["japanese_eisuu"]]) %>,
          "to_after_key_up": [
            <%= set_variable(["enthumble_mode"], [0]) %>
          ],
          "conditions": [
            <%= variable_if(["enthumble_mode"], [0]) %>
          ]
        },
        <%=
          from_keys = ["j", "k", "i", "l"]
          allow_keys   = ["left_arrow", "down_arrow", "up_arrow", "right_arrow"]

          types = ""
          from_keys.zip(allow_keys) do |from_key, allow_key|
            types += "{
              \"type\": \"basic\",
              \"from\": #{from(from_key, [], ["any"])},
              \"to\": #{to([[allow_key, ["shift", "control"]]])},
              \"conditions\": [
                #{variable_if(["enthumble_mode"], [1])}
              ]
            },"
          end
          types.chop!
          types
        %>
      ]
    },
    {
      "description": "(Enthumble) WASD Mode / FPS like",
      "extra_descriptions": [
        "無変換/英数 + A, S, W, D -> 矢印キー（←, ↓, ↑, →）",
        "無変換/英数単独 -> 英数キー"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("international5", [], ["any"]) %>,
          "to": [
            <%= set_variable(["enthumble_mode"], [1]) %>
          ],
          "to_if_alone": <%= to([["japanese_eisuu"]]) %>,
          "to_after_key_up": [
            <%= set_variable(["enthumble_mode"], [0]) %>
          ],
          "conditions": [
            <%= variable_if(["enthumble_mode"], [0]) %>
          ]
        },
        <%=
          from_keys = ["a", "s", "w", "d"]
          allow_keys   = ["left_arrow", "down_arrow", "up_arrow", "right_arrow"]

          types = ""
          from_keys.zip(allow_keys) do |from_key, allow_key|
            types += "{
              \"type\": \"basic\",
              \"from\": #{from(from_key, [], ["any"])},
              \"to\": #{to([[allow_key, ["shift", "control"]]])},
              \"conditions\": [
                #{variable_if(["enthumble_mode"], [1])}
              ]
            },"
          end
          types.chop!
          types
        %>
      ]
    },
    {
      "description": "(Enthumble) HJKL Mode / vi like",
      "extra_descriptions": [
        "無変換/英数 + H, J, K, L -> 矢印キー（←, ↓, ↑, →）",
        "無変換/英数単独 -> 英数キー"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("international5", [], ["any"]) %>,
          "to": [
            <%= set_variable(["enthumble_mode"], [1]) %>
          ],
          "to_if_alone": <%= to([["japanese_eisuu"]]) %>,
          "to_after_key_up": [
            <%= set_variable(["enthumble_mode"], [0]) %>
          ],
          "conditions": [
            <%= variable_if(["enthumble_mode"], [0]) %>
          ]
        },
        <%=
          from_keys = ["h", "j", "k", "l"]
          allow_keys   = ["left_arrow", "down_arrow", "up_arrow", "right_arrow"]

          types = ""
          from_keys.zip(allow_keys) do |from_key, allow_key|
            types += "{
              \"type\": \"basic\",
              \"from\": #{from(from_key, [], ["any"])},
              \"to\": #{to([[allow_key]])},
              \"conditions\": [
                #{variable_if(["enthumble_mode"], [1])}
              ]
            },"
          end
          types.chop!
          types
        %>
      ]
    },
    {
      "description": "(Enthumble) FBNP Mode / emacs like",
      "extra_descriptions": [
        "無変換/英数 + B, N, P, F -> 矢印キー（←, ↓, ↑, →）",
        "無変換/英数単独 -> 英数キー"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("international5", [], ["any"]) %>,
          "to": [
            <%= set_variable(["enthumble_mode"], [1]) %>
          ],
          "to_if_alone": <%= to([["japanese_eisuu"]]) %>,
          "to_after_key_up": [
            <%= set_variable(["enthumble_mode"], [0]) %>
          ],
          "conditions": [
            <%= variable_if(["enthumble_mode"], [0]) %>
          ]
        },
        <%=
          from_keys = ["b", "n", "p", "f"]
          allow_keys   = ["left_arrow", "down_arrow", "up_arrow", "right_arrow"]

          types = ""
          from_keys.zip(allow_keys) do |from_key, allow_key|
            types += "{
              \"type\": \"basic\",
              \"from\": #{from(from_key, [], ["any"])},
              \"to\": #{to([[allow_key, ["shift", "control"]]])},
              \"conditions\": [
                #{variable_if(["enthumble_mode"], [1])}
              ]
            },"
          end
          types.chop!
          types
        %>
      ]
    },
    {
      "description": "(Enthumble) 無変換/英数+ 「スペース/かな」で「Return/Escape」",
      "extra_descriptions": [
        "無変換/英数 + Space/かな -> Enter/Escape",
        "'thumb IME'より下位に設定すると、'無変換/英数 + かな'はIMEオンになります。"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("international5", [], ["any"]) %>,
          "to": [
            <%= set_variable(["enthumble_mode"], [1]) %>
          ],
          "to_if_alone": <%= to([["japanese_eisuu"]]) %>,
          "to_after_key_up": [
            <%= set_variable(["enthumble_mode"], [0]) %>
          ],
          "conditions": [
            <%= variable_if(["enthumble_mode"], [0]) %>
          ]
        },
        <%=
          from_keys = ["spacebar", "international2"]
          to_keys   = ["return_or_enter", "escape"]

          types = ""
          from_keys.zip(to_keys) do |from_key, to_key|
            types += "{
              \"type\": \"basic\",
              \"from\": #{from(from_key, [], ["caps_lock"])},
              \"to\": #{to([[to_key]])},
              \"conditions\": [
                #{variable_if(["enthumble_mode"], [1])}
              ]
            },"
          end
          types.chop!
          types
        %>
      ]
    },
    {
      "description": "(Enthumble) 無変換/英数+ 「N,M/',' '.'」で「BackSpace/Delete」",
      "extra_descriptions": [
        "無変換/英数 + N, M -> Back",
        "無変換/英数 + ',' '.' -> Delete",
        "'FBNP Mode'と併用すると、'無変換/英数 + N'はカーソル移動になります。"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("international5", [], ["any"]) %>,
          "to": [
            <%= set_variable(["enthumble_mode"], [1]) %>
          ],
          "to_if_alone": <%= to([["japanese_eisuu"]]) %>,
          "to_after_key_up": [
            <%= set_variable(["enthumble_mode"], [0]) %>
          ],
          "conditions": [
            <%= variable_if(["enthumble_mode"], [0]) %>
          ]
        },
        <%=
          from_keys = ["n", "m", "comma", "period"]
          to_keys   = ["delete_or_backspace", "delete_or_backspace", "delete_forward", "delete_forward"]

          types = ""
          from_keys.zip(to_keys) do |from_key, to_key|
            types += "{
              \"type\": \"basic\",
              \"from\": #{from(from_key, [], ["caps_lock"])},
              \"to\": #{to([[to_key]])},
              \"conditions\": [
                #{variable_if(["enthumble_mode"], [1])}
              ]
            },"
          end
          types.chop!
          types
        %>
      ]
    },
    {
      "description": "(Enthumble) 無変換/英数+ 「Y,U/I,O」で「BackSpace/Delete」",
      "extra_descriptions": [
        "無変換/英数 + Y, U -> Back",
        "無変換/英数 + I, O -> Delete",
        "'IJKL Mode'と併用すると、'無変換/英数 + I'はカーソル移動になります。"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("international5", [], ["any"]) %>,
          "to": [
            <%= set_variable(["enthumble_mode"], [1]) %>
          ],
          "to_if_alone": <%= to([["japanese_eisuu"]]) %>,
          "to_after_key_up": [
            <%= set_variable(["enthumble_mode"], [0]) %>
          ],
          "conditions": [
            <%= variable_if(["enthumble_mode"], [0]) %>
          ]
        },
        <%=
          from_keys = ["y", "u", "i", "o"]
          to_keys   = ["delete_or_backspace", "delete_or_backspace", "delete_forward", "delete_forward"]

          types = ""
          from_keys.zip(to_keys) do |from_key, to_key|
            types += "{
              \"type\": \"basic\",
              \"from\": #{from(from_key, [], ["caps_lock"])},
              \"to\": #{to([[to_key]])},
              \"conditions\": [
                #{variable_if(["enthumble_mode"], [1])}
              ]
            },"
          end
          types.chop!
          types
        %>
      ]
    },
    {
      "description": "(Enthumble) thumb IME",
      "extra_descriptions": [
        "無変換/英数 -> IME OFF",
        "変換/かな -> IME ON"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("international2", [], ["caps_lock"]) %>,
          "to": <%= to(["international2"]) %>,
          "to_if_alone": <%= to(["japanese_kana"]) %>
        },
        {
          "type": "basic",
          "from": <%= from("international4", [], ["caps_lock"]) %>,
          "to": <%= to(["international4"]) %>,
          "to_if_alone": <%= to(["japanese_kana"]) %>
        },
        {
          "type": "basic",
          "from": <%= from("international5", [], ["any"]) %>,
          "to": <%= to(["international5"]) %>,
          "to_if_alone": <%= to(["japanese_eisuu"]) %>
        }
      ]
    }
  ]
}
