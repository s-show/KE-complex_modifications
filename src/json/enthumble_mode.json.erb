{
  "title": "enthumble(Windows App) Mode",
  <%# Gistに掲載中(erbファイル) https://gist.github.com/s-show/92b823f8fe67e06b809f3d1c6d04bc4f/edit %>
  "rule_list": false,
  "make_extra_description": true,
  "rules": [
    {
      "description": "(enthumble) IJKL Mode / normal",
      "extra_descriptions": [
        "無変換/英数 + J, K, I, L -> カーソル移動（←, ↓, ↑, →）",
        "無変換/英数 単独h -> 英数キー"
      ],
      "extra_description_level": 1,
      "manipulators":
      <%=
        manipulators = each_key(
                                source_keys_list: ["international5"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["lang2"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["j", "k", "i", "l"],
                                dest_keys_list: ["left_arrow", "down_arrow", "up_arrow", "right_arrow"],
                                from_mandatory_modifiers: ["fn"],
                                from_optional_modifiers: ["shift", "control", "caps_lock"],
                              )
        JSON.generate(manipulators)
      %>
    },
    {
      "description": "(enthumble) WASD Mode / FPS like",
      "extra_descriptions": [
        "無変換/英数 + A, S, W, D -> カーソル移動（←, ↓, ↑, →）",
        "無変換/英数 単独 -> 英数キー"
      ],
      "extra_description_level": 1,
      "manipulators":
      <%=
        manipulators = each_key(
                                source_keys_list: ["international5"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["lang2"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["a", "s", "w", "d"],
                                dest_keys_list: ["left_arrow", "down_arrow", "up_arrow", "right_arrow"],
                                from_mandatory_modifiers: ["fn"],
                                from_optional_modifiers: ["shift", "control", "caps_lock"],
                              )
        JSON.generate(manipulators)
      %>
    },
    {
      "description": "(enthumble) HJKL Mode / vi like",
      "extra_descriptions": [
        "無変換/英数 + H, J, K, L -> カーソル移動（←, ↓, ↑, →）",
        "無変換/英数 単独 -> 英数キー"
      ],
      "extra_description_level": 1,
      "manipulators":
      <%=
        manipulators = each_key(
                                source_keys_list: ["international5"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["lang2"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["h", "j", "k", "l"],
                                dest_keys_list: ["left_arrow", "down_arrow", "up_arrow", "right_arrow"],
                                from_mandatory_modifiers: ["fn"],
                                from_optional_modifiers: ["shift", "control", "caps_lock"],
                              )
        JSON.generate(manipulators)
      %>
    },
    {
      "description": "(enthumble) FBNP Mode / emacs like",
      "extra_descriptions": [
        "無変換/英数 + B, N, P, F -> カーソル移動（←, ↓, ↑, →）",
        "無変換/英数 単独 -> 英数キー"
      ],
      "extra_description_level": 1,
      "manipulators":
      <%=
        manipulators = each_key(
                                source_keys_list: ["international5"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["lang2"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["b", "n", "p", "f"],
                                dest_keys_list: ["left_arrow", "down_arrow", "up_arrow", "right_arrow"],
                                from_mandatory_modifiers: ["fn"],
                                from_optional_modifiers: ["shift", "control", "caps_lock"],
                              )
        JSON.generate(manipulators)
      %>
    },
    {
      "description": "(enthumble) 無変換/英数 + 「Space/かな」で「Return/Escape」",
      "extra_descriptions": [
        "無変換/英数 + Space/かな -> Enter/Escape",
        "'thumb IME'より下位に設定すると、'無変換/英数 + かな'はIMEオンになります。"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type":"basic",
          "from": <%= from("spacebar", ["fn"], ["caps_lock"]) %>,
          "to": <%= to(["return_or_enter"]) %>
        },
        {
          "type":"basic",
          "from": <%= from("international2", ["fn"], ["caps_lock"]) %>,
          "to": <%= to(["escape"]) %>
        },
        {
          "type":"basic",
          "from": <%= from("international5", [], ["caps_lock"]) %>,
          "to": [
            {
              "key_code": "fn",
              "lazy": true
            }
          ],
          "to_if_alone": <%= to(["japanese_eisuu"]) %>
        }
      ]
    },
    {
      "description": "(enthumble) 無変換/英数 + 「N,M/',' '.'」で「BackSpace/Delete」",
      "extra_descriptions": [
        "無変換/英数 + N, M -> BackSpace",
        "無変換/英数 + ',' '.' -> Delete",
        "'FBNP Mode'と併用すると、'無変換/英数 + N'はカーソル移動になります。"
      ],
      "extra_description_level": 1,
      "manipulators":
      <%=
        manipulators = each_key(
                                source_keys_list: ["international5"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["lang2"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["n", "m", "comma", "period"],
                                dest_keys_list: ["delete_or_backspace", "delete_or_backspace", "delete_forward", "delete_forward"],
                                from_mandatory_modifiers: ["fn"],
                                from_optional_modifiers: ["caps_lock"],
                              )
        JSON.generate(manipulators)
      %>
    },
    {
      "description": "(enthumble) 無変換/英数 + 「Y,U/I,O」で「BackSpace/Delete」",
      "extra_descriptions": [
        "無変換/英数 + Y, U -> BackSpace",
        "無変換/英数 + I, O -> Delete",
        "'IJKL Mode'と併用すると、'無変換/英数  + I'はカーソル移動になります。"
      ],
      "extra_description_level": 1,
      "manipulators":
      <%=
        manipulators = each_key(
                                source_keys_list: ["international5"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["lang2"],
                                dest_keys_list: ["fn"],
                                from_optional_modifiers: ["any"],
                                to_if_alone: ["japanese_eisuu"]
                              )
        manipulators += each_key(
                                source_keys_list: ["y", "u", "i", "o"],
                                dest_keys_list: ["delete_or_backspace", "delete_or_backspace", "delete_forward", "delete_forward"],
                                from_mandatory_modifiers: ["fn"],
                                from_optional_modifiers: ["caps_lock"],
                              )
        JSON.generate(manipulators)
      %>
    },
    {
      "description": "(enthumble) 無変換/英数 + 矢印キー（←, ↓, ↑, →）で「←, ↓, ↑, →」入力",
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("international5", [], ["any"]) %>,
          "to": <%= to(["fn"]) %>,
          "to_if_alone": <%= to([["japanese_eisuu"]]) %>
        },
        {
          "type": "basic",
          "from": {
            "key_code": "left_arrow",
            "modifiers": { "mandatory": ["fn"], "optional": ["caps_lock"] }
          },
          "to": [
            { "shell_command": "osascript -e 'set the clipboard to \"←\"'" },
            { "shell_command": "osascript -e 'tell application \"System Events\" to keystroke \"v\" using command down'" }
          ]
        },
        {
          "type": "basic",
          "from": {
            "key_code": "down_arrow",
            "modifiers": { "mandatory": ["fn"], "optional": ["caps_lock"] }
          },
          "to": [
            { "shell_command": "osascript -e 'set the clipboard to \"↓\"'" },
            { "shell_command": "osascript -e 'tell application \"System Events\" to keystroke \"v\" using command down'" }
          ]
        },
        {
          "type": "basic",
          "from": {
            "key_code": "up_arrow",
            "modifiers": { "mandatory": ["fn"], "optional": ["caps_lock"] }
          },
          "to": [
            { "shell_command": "osascript -e 'set the clipboard to \"↑\"'" },
            { "shell_command": "osascript -e 'tell application \"System Events\" to keystroke \"v\" using command down'" }
          ]
        },
        {
          "type": "basic",
          "from": {
            "key_code": "right_arrow",
            "modifiers": { "mandatory": ["fn"], "optional": ["caps_lock"] }
          },
          "to": [
            { "shell_command": "osascript -e 'set the clipboard to \"→\"'" },
            { "shell_command": "osascript -e 'tell application \"System Events\" to keystroke \"v\" using command down'" }
          ]
        }
      ]
    },
    {
      "description": "(enthumble) thumb IME",
      "extra_descriptions": [
        "無変換/英数  -> IME OFF",
        "変換/かな -> IME ON"
      ],
      "extra_description_level": 1,
      "manipulators":
      <%=
        each_key(
                  source_keys_list: ["international2", "international4", "international5"],
                  dest_keys_list: ["international2", "international4", "international5"],
                  from_optional_modifiers: ["caps_lock"],
                  to_if_alone: ["japanese_kana", "japanese_kana", "japanese_eisuu")
                  ],
                  as_json: true
                )
      %>
    }
  ]
}
