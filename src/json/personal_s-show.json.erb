{
  "title": "Personal rules (@s-show)",
  "rule_list": false,
  "make_extra_description": true,
  "rules": [
    {
      "description": "command-E Open Finder",
      "manipulators": [
        {
          <%# Cmd-E Open Finder %>
          "type": "basic",
          "from": <%= from("e", ["command"], ["any"]) %>,
          "to": [
            {"shell_command": "open ~"}
          ],
          "conditions": [
            <%= frontmost_application_unless("remote_desktop") %>
          ]
        }
      ]
    },
    {
      "description": "control-Esc Open LaunchPad",
      "manipulators": [
        {
          <%# control-Escape to vk_launchpad %>
          "type": "basic",
          "from": <%= from("escape", ["control"], []) %>,
          "to": <%= to([["vk_launchpad", []]]) %>,
          "conditions": [
            <%= frontmost_application_unless("remote_desktop") %>
          ]
        }
      ]
    },
    {
      "description": "CapsLock to Japanese_eisuu, shift-CapsLock to CapsLock toggle.",
      "manipulators": [
        {
          <%# 参考：KE-complex_modifications/caps_lock.json at master ·pqrs-org/KE-complex_modifications %>
          <%# https://github.com/pqrs-org/KE-complex_modifications/blob/master/docs/json/caps_lock.json %>
          "type": "basic",
          "from": <%= from("caps_lock", ["shift"], ["caps_lock"]) %>,
          "to": <%= to([["caps_lock", []]]) %>
        },
        {
          "type": "basic",
          "from": <%= from("caps_lock", [], ["any"]) %>,
          "to": <%= to([["japanese_eisuu", []]]) %>
        }
      ]
    },
    {
      "description": "Application_key(or shift-F10) to Right Click",
      "manipulators": [
        {
          <%# Application_key to Right Click %>
          "type": "basic",
          "from": <%= from("application", [], ["any"]) %>,
          "to": <%= to([["button2", []]]) %>,
          "conditions": [
            <%= frontmost_application_unless("remote_desktop") %>
          ]
        },
        {
          <%# この組み合わせには、optionalにcaps_lockの指定が必要 %>
          "type": "basic",
          "from": <%= from("f10", ["shift"], ["caps_lock"]) %>,
          "to": <%= to([["button2", []]]) %>,
          "conditions": [
            <%= frontmost_application_unless("remote_desktop") %>
          ]
        }
      ]
    },
    {
      "description": "PrintScreen_key Screenshot(full Screen)",
      "extra_descriptions": [
        "Screenshot save in ~/Desktop/screenshot-yyyymmdd-hhmmss",
        "PrintScreen_key -> Screenshot",
        "PrintScreen_key-p -> Screenshot and Preview",
        "スクリーンショットは、'~/Desktop/screenshot-yyyymmdd-hhmmss'というファイル名で保存されます",
        "PrintScreenで、スクリーンショットの撮影（画面全体）のみ行います",
        "PrintScreen-Pで、スクリーンショット（画面全体）を撮影した後プレビューします。"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("print_screen", [], ["caps_lock"]) %>,
          <%# PrintScreenキーを押している状態を次のアクションに伝えるため、変数を使う %>
          "to": [
            <%= set_variable(["press_printscreen_key"], [1]) %>
          ],
          "to_if_alone": [
          <%# PrintScreenキー単独で押したときはスクリーンショット撮影のみ行う %>
            {"shell_command": "screencapture ~/Desktop/screenshot-`date +%Y%m%d-%H%M%S`.png"}
          ],
          <%# PrintScreenキーから手を離した状態にする %>
          "to_after_key_up": [
            <%= set_variable(["press_printscreen_key"], [0]) %>
          ],
          "conditions": [
            <%= frontmost_application_unless("remote_desktop") %>,
            <%= variable_if(["press_printscreen_key"], [0]) %>
          ]
        },
        {
          "type": "basic",
          "from": <%= from("p", [], ["caps_lock"]) %>,
          <%# PrintScreenキー + Pキーで押したときは、スクリーンショットを撮影してプレビューする %>
          "to": [
            {"shell_command": "screencapture -P ~/Desktop/screenshot-`date +%Y%m%d-%H%M%S`.png"}
          ],
          "conditions": [
            <%= variable_if(["press_printscreen_key"], [1]) %>
          ]
        }
      ]
    },
    {
      "description": "Option-PrintScreen Screenshot(Select Window)",
      "extra_descriptions": [
        "Screenshot save in ~/Desktop/screenshot-yyyymmdd-hhmmss",
        "option-PrintScreen -> Screenshot",
        "スクリーンショットは、'~/Desktop/screenshot-yyyymmdd-hhmmss'というファイル名で保存されます",
        "option-PrintScreenで、スクリーンショット（ウィンドウ選択モード）の撮影のみ行います"
      ],
      "extra_description_level": 1,
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("print_screen", ["option"], ["caps_lock"]) %>,
          "to": [
            {"shell_command": "screencapture -oW ~/Desktop/screenshot-`date +%Y%m%d-%H%M%S`.png"}
          ],
          "conditions": [
            <%= frontmost_application_unless("remote_desktop") %>
          ]
        }
      ]
    },
    {
      "description": "Finder(Delete to command-delete(delete file))",
      "extra_descriptions": [
        "Windows like key_bind",
        "Windowsと同様に、Deleteでファイルが削除できます"
      ],
      "manipulators": [
        {
          "type": "basic",
          "from": <%= from("delete_forward", [], ["any"]) %>,
          "to": <%= to([["delete_or_backspace", ["command"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("finder") %>
          ]
        }
      ]
    },
		{
			"description": "ATOM(Esc (or Control-[) sends Esc Japanese_eisuu Esc Esc Esc)",
      "extra_descriptions": [
        "This key_bind for 'vim-mode-plus'",
        "Send Esc, Eisu, Esc, Esc and Esc to stop changing at IME, disable IME and change to Normal mode at atom(with vim-mode-plus) at once.",
        "このキーバインドは、ATOMに'vim-mode-plus'をインストールしている場合に役立ちます",
        "Escを押すと、'Esc + 英数 + Esc + Esc + Esc'とキーを送ることで、変換途中でもIMEをオフにした上でノーマルモードに切り替わります。"
      ],
      "manipulators":
      <%=
        each_key(
          source_keys_list: ["escape", hash_from("close_bracket", ["control"])],
          dest_keys_list: [[], []],
          to_post_events: ["escape", "japanese_eisuu", "escape", "escape", "escape"],
          conditions: [frontmost_application_if("atom", false)],
          as_json: true
        )
      %>
		},
		{
			"description": "ATOM(Next_Pane/Prev_Pane by control-shift-Pagedown/Pageup at ATOM)",
      "manipulators": [
				{
					"type": "basic",
          "from": <%= from("page_down", ["control", "shift"], ["caps_lock"]) %>,
          "to":
            <%=
             to([
              ["k", ["command"]],
              ["right_arrow", ["command"]]
              ])
             %>,
          "conditions": [
            <%= frontmost_application_if("atom") %>
          ]
				},
				{
					"type": "basic",
          "from": <%= from("page_up", ["control", "shift"], ["caps_lock"]) %>,
          "to":
            <%=
             to([
              ["k", ["command"]],
              ["left_arrow", ["command"]]
              ])
             %>,
          "conditions": [
            <%= frontmost_application_if("atom") %>
          ]
				}
      ]
		},
		{
			"description": "Browser(F5 to command-R)",
			<%# firefoxは最初から設定済み %>
      "extra_descriptions": [
        "For Chrome, Safari",
        "This setting is accomplished in Firefox from a beginning.",
        "この設定はChromeとSafari用です。FirefoxはF5キーで更新する初期設定になっています。"
      ],
			"manipulators": [
				{
					"type": "basic",
          "from": <%= from("f5", [], ["any"]) %>,
          "to": <%= to([["r", ["left_command"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("chrome_and_safari") %>
          ]
				}
			]
		},
		{
			"description": "Browser(option-Home to homepage)",
			<%# firefoxは最初から設定済み %>
      "extra_descriptions": [
        "For Chrome, Safari",
        "This setting is accomplished in Firefox from a beginning.",
        "この設定はChromeとSafari用です。FirefoxはF5キーで更新する初期設定になっています。"
      ],
			"manipulators": [
				{
					"type": "basic",
          "from": <%= from("home", ["option"], ["any"]) %>,
          "to": <%= to([["h", ["left_command", "left_shift"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("chrome_and_safari") %>
          ]
				}
			]
		},
		{
      "description": "Next/Prev by option-Left/Right arrow at browser",
      "extra_descriptions": [
        "For Chrome, Safari, Firefox."
      ],
      <%# erb2json.rbで用意されているdevice_ifメソッドは、HHKBキーボード専用のメソッドのため、device_ifメソッドは使えない。 %>
      "manipulators": [
				{
					"type": "basic",
          "from": <%= from("right_arrow", ["option"], []) %>,
          "to": <%= to([["backslash", ["command"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("browser") %>,
            {
              "type": "device_if",
              "identifiers": [
                {
                  "vendor_id": 1455,
                  "product_id": 4131
                }
              ]
            }
          ]
				},
				{
					"type": "basic",
          "from": <%= from("left_arrow", ["option"], []) %>,
          "to": <%= to([["close_bracket", ["command"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("browser") %>,
            {
              "type": "device_if",
              "identifiers": [
                {
                  "vendor_id": 1455,
                  "product_id": 4131
                }
              ]
            }
          ]
				}
      ]
		},
		{
			"description": "Chrome(command-L send command-L, Japanese_eisuu)",
      "extra_descriptions": [
        "The Japanese hardly inputs Japanese in an address bar."
      ],
			<%# アドレスバーで日本語を入力することはないため %>
			<%# CapsLockがONでも変換する %>
			"manipulators": [
				{
					"type": "basic",
          "from": <%= from("l", ["command"], ["caps_lock"]) %>,
          "to": <%= to([["l", ["command"]], ["japanese_eisuu"]]) %>,
          "conditions": [
            <%= frontmost_application_if("chrome") %>
          ]
				}
			]
		},
		{
			"description": "Safari(Next_tab/Prev_tab by control-Pagedown/Pageup at Safari)",
			<%# Chromeとfirefoxは最初から設定済み %>
			"manipulators": [
				{
					"type": "basic",
          "from": <%= from("page_down", ["control"], ["caps_lock"]) %>,
          "to": <%= to([["tab", ["control"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("safari") %>
          ]
				},
				{
					"type": "basic",
          "from": <%= from("page_up", ["control"], ["caps_lock"]) %>,
          "to": <%= to([["tab", ["control", "shift"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("safari") %>
          ]
				}
			]
		},
		{
			"description": "Terminal(Next_tab/Prev_tab by control-Pagedown/Pageup at Terminal)",
			"manipulators": [
				{
					"type": "basic",
          "from": <%= from("page_down", ["control"], ["caps_lock"]) %>,
          "to": <%= to([["tab", ["control"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("terminal") %>
          ]
				},
				{
					"type": "basic",
          "from": <%= from("page_up", ["control"], ["caps_lock"]) %>,
          "to": <%= to([["tab", ["control", "shift"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("terminal") %>
          ]
				}
			]
		},
		{
			"description": "iTerm2(Next_Pane/Prev_Pane by control-Pagedown/Pageup at iTerm2)",
			"manipulators": [
				{
					"type": "basic",
          "from": <%= from("page_down", ["control"], ["caps_lock"]) %>,
          "to": <%= to([["backslash", ["command"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("iterm2") %>
          ]
				},
				{
					"type": "basic",
          "from": <%= from("page_up", ["control"], ["caps_lock"]) %>,
          "to": <%= to([["close_bracket", ["command"]]]) %>,
          "conditions": [
            <%= frontmost_application_if("iterm2") %>
          ]
				}
			]
		}
  ]
}
